#include <ansi.h>

inherit NPC;
string check_future()
{
	object me = this_player();
	if( me->query("quests/kill-dugur") && !me->query("quests/back-young") )
		return "「独孤一掌天下动，千书一指武林惊。”";
	return "天机不可泄漏也 ...。\n";
}

string a_array()
{
	if(this_player()->query("quests/sblood")==0)
		command("say 啥...你说啥?? ");
	else
	{
		command("say 天门奇阵为一威力极强之阵法，此阵由大破魔师所设，武林传言，先剑祖师曾藉开天三灵器合刀神儒侠之力设下此阵.");
		command("say 至于如何开启....我就不知道了...");
	}
}

string liyu()
{
	if(this_player()->query("liyu")==0)
	{
		command("say 啥...你说啥?? ");
	}
	else
	{
		command("say 此乃开天三灵器之一的灵笔，当初乃剑师龙铁心由仙剑连阳所分铸而出，只知当初是传给儒门，不过，在儒门大变之后，被七星塔的七个土匪所偷走....只是不知道他们把他拿到哪去....");
		this_player()->set("liyu",2);
	}
}

void create()
{
	set_name("诸葛卧龙",({"master dguger","dguger"}));
	set("gender","男性");
	set("title","神算先生");
	set("combat_exp",100);

	set("attitude","heroism");
	set("age",27);
	set("no_answer",1);
	set("inquiry",([
	"去老还童术" : "相传去老还童之法有二，一者乃是收集「锁元盒”以及「青龙之气”，利用锁元盒将自身元力保存，再利用青龙之气再生的神力将自身状况回复到年轻时代，之后再将锁元盒内的元力放回，另外一法则是修练「玄子神功”，此法乃创始于西汉张天师，修练此法可使" +
	"驱体有去旧还新之能也，惟此法难学，且会的的人不多。\n",
  "丽玉蝶兰" : (: liyu :),
	"青龙之气" : "相传此气乃天庭青龙所化，具有保卫主人及将物品恢复原状之能，据我所知，能召唤此青龙者，惟有儒门的青龙之笛。\n",
	"玄子神功" : "此乃由西汉张陵所创之绝技，修练此法必须消耗极多的内力，而此法之作用主要是能够使人去老还童。\n",
	"保持自身元力" : "此乃「锁元盒”之特殊功能也，当今世上也只有仙云山上的高人知道他的用法。\n",
	"姜子牙" : "此人乃商朝名人，曾辅佐周武王平定暴君纣王。\n",
	"九阳真火" : "九阳真火有名天火，乃天庭之火也，此火水浇不熄，风吹不灭。\n",
	"未来" : (: check_future :),
//     "天母峰" : "此地在西疆一带，又名「圣母峰”，山中有些许特殊的矿物。\n",
	"天母石" : "此物产于西疆一带的天母峰，相传雪苍也有一颗，后更其名为「天邪石”。\n",
	"天邪石" : "此即「天母石”也，乃雪苍派第三代独孤愁远赴西疆带回，现今亦在雪苍。\n",
	"盗走之人" : "此天机也... 汝日自可得知。\n",
	"青龙之笛" : "此乃可以召唤青龙之物，相传此物落入儒门之中。\n",
	"张天师" : "此人本名张陵，后修练符法，成为道教的创始人。\n",
	"张陵" : "此人人称张天师，生于西汉，擅于使用符法。\n",
//     "符法" : "符法乃创始于西汉张陵，相传符法有许多不可思议之处，如驱魔伏妖、点石成金、穿梭时空等等。\n",
	"驱魔伏妖" : "此乃符法之最主要功能，主要是用莱驱除一些危害人类的妖魔。\n",
	"点石成金" : "此能符法之骗术之一，事实上是用障眼法来瞒住一般人的眼睛，并非真正将石头变成黄金，但是此障眼之术也颇为神奇，不可忽视。\n",
	"穿梭时空" : "此乃符法中最上乘之密法，可使人回到过去的时空，但是施行此法必需耗费一甲子的功力。\n",
	"郑士欣" : "此人乃是仙剑派的掌门人，道号「无极真人”，是武林人士所公认的天下第一高手、以及第一剑客，武功之高，匪夷所思，惟其年纪渐长，功力已不如年轻时那般强劲，而其门下则有弟子七人，合称「仙剑七侠”，武功亦是不弱。\n",
	"莫测" : "此人乃武林四大高手之一，人称「魔刀”，在天下所有用刀高手之中排行第一，为人十分爽直，但与雪苍派的独孤愁有些过节，曾发生多次的冲突，后来在十年前就消失于武林，不知去向。\n",
	"独孤愁" : "此人乃是武林四大高手之一，外号「雪掌”，此人掌法精绝，有「天下第一掌”之称，此外此人又饱读诗书，经通诸子百家之书，文武双全，曾经称霸武林有很长的一段时日，而据传闻，此人因修行雪苍派密招而走火入魔身亡，遗有一子，名「云”。",
	"邢千书" : "此人在二十年前以一手的「儒门幻指”威镇武林，人称「幻指”，又称「指剑才子”，乃是武林四大高手之一，后来在二十年前，受好友独孤愁之托，守护雪苍派至宝「锁元盒”，不幸被来路不明的几个高手所杀，遗有一子，名曰「贤书”。\n",
	"四大高手" : "武林之四大高手乃是「仙剑”郑士欣、「魔刀”莫测、「雪掌”独孤愁、「幻指”邢千书等四人。\n",
	"儒门幻指" : "此乃儒门代代相同的绝学，可惜在邢千书死后就已失传。\n",
	"独孤云" : "此人复姓独孤名云，乃雪苍派名人独孤愁之子，武功亦是不凡，且此人承袭其父教诲，亦是饱读经史，有「全才书生”的美誉。\n",
	"无极真人" : "乃仙剑郑士欣也。\n",
	"全才书生" : "此人乃雪苍派后起之秀，独孤愁之子独孤云。\n",
	"邢贤书" : "此人乃儒门一代高手邢千书之子，与吾为故交。\n",
	"圣贤书" : "此人原名邢贤书，后更姓而为圣贤书，乃吾故交好友。\n",
	"刘全书" : "此人外号「黑影鬼脚”，乃是雪苍派现任掌门人，武功亦是不凡，与雪苍派王魁、星斗宿合称雪苍三侠。\n",
	"王魁" : "此人乃雪苍派刘全书之师弟，为雪苍三侠之一。\n",
	"星斗宿" : "此人乃雪苍派刘全书之师弟，为雪苍三侠之一，擅观星相，精通阵法。\n",
	"雪苍三侠" : "雪苍三侠指的是刘全书、王魁、星斗宿等三人。\n",
	"陆小双" : "此人乃一代奇才，人称「刀剑双绝”，刀法、剑术皆称一流，相传其刀法乃魔刀所传，剑法学自郑士欣，曾经跟随随独孤愁，后来独孤愁死后则下落不明。\n",
	"叶秀杀" : "此人乃是杀手组织「黑牙联”的首脑，天生就是一个哑吧，擅于使用暗器，暗杀过无数英雄豪杰。\n",
	"风采铃" : "此人天生丽质，貌美若仙，是武林中罕见的美女，人称「琴舞双绝”，擅长音乐及舞蹈，和陆小双并称「二绝”。\n",
	"二绝" : "二绝指的是「刀剑双绝”陆小双，以及「琴舞双绝”风采铃。\n",
	"庄静柔" : "此人乃是冥蛊魔教教主，为人阴险，擅使毒，武林中人皆惧怕她三分。\n",
  "李梦枕" : "此人为金风细雨楼楼主，近年来已从武林中消失..\n",
  "开天三才阵" : "这个阵法听说是当年逍遥子用来困血魔的...不过直至现今..仍无人得见\n",
  "天门奇阵" : (: a_array :),
		]));
	setup();
}

int accept_fight( object who )
{
	command("say 逞强斗勇非智者所为也。");
	return 0;
}
int accept_kill( object who )
{
	command("say 杀了我对你并没有好处。");
	return 0;
}
int do_say( object me )
{
	if( !me->query("quests/find_dguger") ) {
		command("say 阁下光临此地，诸葛某有失远迎，幸会幸会。");
		me->set("quests/find_dguger",1);
		return 1;
	}
	command("say 阁下再度光临寒舍，不知有何指教 ?");
}
void init()
{
	object me = this_player();
	call_out("do_say",1,me);
	add_action("do_ask","ask");
}

int do_ask( string arg )
{
	if( !arg || sscanf(arg,"dguger about %s",arg) != 1 ) return 0;
	if( !query("inquiry/"+arg) ) {
		command("say 天机不可泄漏也....。");
		return 1;
	}
	command("say "+query("inquiry/"+arg));
	return 1;
}
